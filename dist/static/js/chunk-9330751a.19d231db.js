/*! new version */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9330751a"],{"02eb":function(t,e,a){"use strict";a("df52")},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"743a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dimentsion-field-container flex-box--column"},[a("PageBreadcrumb",{attrs:{"title-list":t.titleList}}),a("div",{staticClass:"dimentsion-field-search"},[a("a-input",{staticClass:"search__input",attrs:{placeholder:"请输入数据维度"},model:{value:t.search.dimensionName,callback:function(e){t.$set(t.search,"dimensionName",e)},expression:"search.dimensionName"}}),a("a-input",{staticClass:"search__input",attrs:{placeholder:"请输入字段名称"},model:{value:t.search.columnName,callback:function(e){t.$set(t.search,"columnName",e)},expression:"search.columnName"}}),a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSearch(1)}}},[t._v("查询")])],1),a("div",{staticClass:"dimentsion-field-table"},[a("SenseTable",t._b({ref:"senseTable",on:{"page-change":t.changePage},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.row;return[a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.onSampleData(n)}}},[t._v(" 查看样例数据 ")])]}}])},"SenseTable",t.tableOptions,!1))],1),a("SampleDataModal",{attrs:{"data-dimension-id":t.dataDimensionId,title:t.modalTitle,"is-dimension-column":t.isDimensionColumn},on:{updateListInfo:t.initSearch},model:{value:t.isSampleDataModal,callback:function(e){t.isSampleDataModal=e},expression:"isSampleDataModal"}})],1)},i=[],s=(a("ac1f"),a("841c"),a("d3b7"),a("bc42")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-base-modal",{attrs:{title:t.title,width:"65%"},on:{ok:t.onOk,cancel:t.onCancel},model:{value:t.isSampleDataModalShow,callback:function(e){t.isSampleDataModalShow=e},expression:"isSampleDataModalShow"}},[a("div",{staticClass:"data-list"},[a("div",{staticClass:"list-title"},[t._v(" "+t._s(t.titleName)+" "),a("span",{staticClass:"remarks-text"},[t._v("(注：前100条记录显示)")])]),a("div",{staticClass:"table-container"},[a("SenseTable",t._b({ref:"senseTable",on:{"page-change":t.changePage}},"SenseTable",t.tableOptions,!1))],1)])])],1)},l=[],r=a("5530");function c(t){if(Array.isArray(t))return t}a("a4d3"),a("e01a"),a("d28b"),a("3ca3"),a("ddb0");function u(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,s=[],o=!0,l=!1;try{for(a=a.call(t);!(o=(n=a.next()).done);o=!0)if(s.push(n.value),e&&s.length===e)break}catch(r){l=!0,i=r}finally{try{o||null==a["return"]||a["return"]()}finally{if(l)throw i}}return s}}var d=a("06c5");function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t,e){return c(t)||u(t,e)||Object(d["a"])(t,e)||m()}a("a9e3"),a("fb6a");var f=a("d8fe"),g={name:"SampleData",model:{prop:"visible",event:"change"},props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},isDimensionColumn:{type:Boolean,default:!1},dataDimensionId:{type:Number,default:null}},data:function(){return{isSampleDataModalShow:!1,tableOptions:{emptyRender:{size:"small"},pagerConfig:{pageSizes:[10,20,50,100],total:0,currentPage:1,pageSize:10},loading:!1,columns:[{title:"字段编号",field:"columnCode"},{title:"字段名称",field:"columnName"}],data:[]},tableData:[],titleName:""}},watch:{visible:function(t){this.isSampleDataModalShow=t,t&&this.getSampleData()}},methods:{getSampleData:function(){this.isDimensionColumn&&this.selectListByDimensionIds()},selectListByDimensionIds:function(){var t=this;this.tableOptions.loading=!0,f["a"].selectListByDimensionIds([this.dataDimensionId]).then((function(e){var a=p(e.data.content,1),n=a[0];t.titleName=n.dimensionName,t.tableOptions.pagerConfig.total=n.columns.length,t.tableData=t.splitArr(n.columns,t.tableOptions.pagerConfig.pageSize),t.changePage(Object(r["a"])({},t.tableOptions.pagerConfig))})).catch((function(){t.$message.warn("查询样例数据列表失败")})).finally((function(){t.tableOptions.loading=!1}))},changePage:function(t){this.tableOptions.pagerConfig.currentPage=t.currentPage,this.tableOptions.pagerConfig.pageSize=t.pageSize,this.tableOptions.data=this.tableData[t.currentPage-1]},splitArr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=0,n=[];while(a<t.length)n.push(t.slice(a,a+e)),a+=e;return n},onOk:function(){this.onClose()},onCancel:function(){this.onClose()},onClose:function(){this.dataDimensionName="",this.tableOptions.data=[],this.tableData=[],this.tableOptions.pagerConfig.total=0,this.tableOptions.pagerConfig.currentPage=1,this.tableOptions.pagerConfig.pageSize=10,this.$emit("change"),this.$emit("updateListInfo")}}},h=g,b=(a("e17c"),a("2877")),v=Object(b["a"])(h,o,l,!1,null,"5ef637b0",null),S=v.exports,C={name:"DimentsionField",components:{PageBreadcrumb:s["a"],SampleDataModal:S},data:function(){return{titleList:[{name:"知识库管理"},{name:"维度字段管理"}],search:{dimensionName:"",columnName:""},tableOptions:{height:"auto",emptyRender:{size:"small"},pagerConfig:{pageSizes:[10,20,50,100],total:0,currentPage:1,pageSize:10},loading:!1,columns:[{align:"center",title:"所属数据维度",field:"dimensionName"},{align:"center",title:"字段名称",field:"columnName"},{align:"center",title:"字段英文名称",field:"columnCode"},{align:"center",title:"字段类型",field:"dataType"},{title:"操作",field:"operation",align:"center",fixed:"right",slots:{default:"action"}}],data:[]},isSampleDataModal:!1,modalTitle:"预览数据",isDimensionColumn:!1,dataDimensionId:null}},mounted:function(){this.initSearch()},methods:{getParams:function(){var t=this.search,e=t.dimensionName,a=t.columnName,n=this.tableOptions.pagerConfig,i=n.currentPage,s=n.pageSize,o={dimensionName:e,columnName:a,pageSize:s,page:i};return o},initSearch:function(){var t=this,e=this.getParams();this.tableOptions.loading=!0,f["a"].getDimensionColumnList(e).then((function(e){t.tableOptions.data=e.data.content.list,t.tableOptions.pagerConfig.total=e.data.content.total})).catch((function(){t.$message.warn("查询维度字段列表失败")})).finally((function(){t.tableOptions.loading=!1}))},onSearch:function(t){this.tableOptions.pagerConfig.currentPage=t,this.initSearch()},changePage:function(t){this.tableOptions.pagerConfig.currentPage=t.currentPage,this.tableOptions.pagerConfig.pageSize=t.pageSize,this.initSearch()},onSampleData:function(t){this.dataDimensionId=t.dimensionId,this.isDimensionColumn=!0,this.isSampleDataModal=!0}}},D=C,O=(a("02eb"),Object(b["a"])(D,n,i,!1,null,"66555107",null));e["default"]=O.exports},"841c":function(t,e,a){"use strict";var n=a("d784"),i=a("825a"),s=a("1d80"),o=a("129f"),l=a("577e"),r=a("14c3");n("search",(function(t,e,a){return[function(e){var a=s(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a):new RegExp(e)[t](l(a))},function(t){var n=i(this),s=l(t),c=a(e,n,s);if(c.done)return c.value;var u=n.lastIndex;o(u,0)||(n.lastIndex=0);var d=r(n,s);return o(n.lastIndex,u)||(n.lastIndex=u),null===d?-1:d.index}]}))},"98e9":function(t,e,a){},a3aa:function(t,e,a){},bc42:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-title-container"},[a("div",{staticClass:"page-title"},[a("a-breadcrumb",[a("span",{attrs:{slot:"separator"},slot:"separator"},[t._v(" > ")]),t._l(t.titleList,(function(e,n){return a("a-breadcrumb-item",{key:n},[t._v(" "+t._s(e.name)+" ")])}))],2)],1),a("div",{staticClass:"page-operation"},[t._t("default")],2)])},i=[],s={name:"PageBreadcrumb",props:{titleList:{type:Array,default:function(){return[]}}},data:function(){return{}}},o=s,l=(a("ce26"),a("2877")),r=Object(l["a"])(o,n,i,!1,null,"2f9030fc",null);e["a"]=r.exports},ce26:function(t,e,a){"use strict";a("a3aa")},d8fe:function(t,e,a){"use strict";a("99af");var n=a("7424"),i=a("155f"),s="dimensionColumn",o="".concat(n["METIS"],"/").concat(s),l={getDimensionColumnList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["i"])("".concat(o,"/list"),i["a"].GET,{params:t})},selectListByDimensionIds:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["i"])("".concat(o,"/selectListByDimensionIds"),i["a"].POST,t)}};e["a"]=l},df52:function(t,e,a){},e17c:function(t,e,a){"use strict";a("98e9")}}]);